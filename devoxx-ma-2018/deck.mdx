import { Head, Image, Root, Flex, Appear } from 'mdx-deck'
import { Invert, Split, FullScreen } from 'mdx-deck/layouts'
import { CodeSurfer } from "mdx-deck-code-surfer"
import Box from 'superbox'
import DemoStarwars from './DemoStarwars'
import SplitElement from './SplitElement'
import base  from 'mdx-deck/themes'
import nightOwl from "prism-react-renderer/themes/nightOwl"

export const theme = {
  ...base,  
  font: 'Roboto, sans-serif',
  codeSurfer: {
    ...nightOwl,
    showNumbers: false
  }
}



<Head>
  <title>De l'R les devs Java!</title>

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@_bruno_b_" />
  <meta name="twitter:title" content="De l'R les devs Java!" />
  <meta name="twitter:description" content="Presentation faite à Devoxx Morocco 2018 sur le langage R à destination des Devs Java" />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/bbonnin/talk-de-l-r-les-devs-java/master/devoxx-ma-2018/img/card.png" />
</Head>


# De l'![R](img/r.jpeg) les devs <img src="img/java.png" alt="Java" width="400"/> !

Devoxx Morocco 2018


```notes
Data science avec R pour les développeurs Java
font: 'Roboto, sans-serif',
```

---

## About me

Bruno Bonnin - @\_bruno\_b\_

![R](img/my_technos.png)

---

export default Split

<Box>
  <h2>whoami</h2>
  <p>Bruno Bonnin - @_bruno_b_</p>
  <i>Vieux développeur</i>
</Box>

<SplitElement img="img/haddock.png" backgroundColor="black" color="white"/>

---

export default Split

<Box>
  <h2>whoami</h2>
  <p>Bruno Bonnin - @_bruno_b_</p>
  <i>Vieux développeur</i>
</Box>

<SplitElement img="img/gandalf.png" backgroundColor="black" color="white"/>

---

<Image src="img/batman_superman.jpg" size="contain"/>

---

export default Split

<SplitElement img="img/Rlogo.png" backgroundColor="white" color="white"/>

<Box is="div" p={4}>
  <h2>Langage de script venant des statisticiens</h2>
  <p style={{ fontSize: '0.5em' }}>(donc incompréhensibles pour des informaticiens normalement constitués...)</p>
  <p>Inventé en 1993 (Université d'Auckland)</p>
  <p>Dédié aux statistiques, très utilisé dans le monde de la data science</p>
  <p>Grande communauté, beaucoup de librairies</p>
  <p>Open source</p>
</Box>

[https://www.r-project.org/](https://www.r-project.org/)


---

<CodeSurfer
  title="C'est parti !"
  code={require("!raw-loader!./snippets/start.R")}
  steps={[
    { range: [1, 6], notes: "Lancement de l'interpréteur..." },
    { lines: [8], notes: "... vous êtes maintenant prêt à coder !" },
    { range: [10, 11] }
  ]}
/>

---

<CodeSurfer
  title="La base"
  code={require("!raw-loader!./snippets/base.R")}
  lang="bash"
  steps={[
    { notes: "Quelques notions de base..." },
    { range: [1, 4], notes: "Types de base et affectation" },
    { range: [6, 9], notes: "Les vecteurs" },
    { range: [11, 23], notes: "Accès aux éléments d'un vecteur" },
    { range: [25, 33], notes: "Quelques opérations" },
    { range: [35, 49], notes: "Nommage des éléments" }
  ]}
/>

```notes
le premier indice est 1 !!!
```

---

<SplitElement img="img/builtin_fcts.png" title="Fonctions (maths, stats)" backgroundColor="white" color="black"/>


```notes
https://cran.r-project.org/doc/contrib/Short-refcard.pdf
https://www.rstudio.com/resources/cheatsheets/
```
---

<CodeSurfer
  title="Programmer / Instructions"
  code={require("!raw-loader!./snippets/programming.R")}
  lang="bash"
/>

---

<CodeSurfer
  title="Les matrices"
  code={require("!raw-loader!./snippets/matrix.R")}
  lang="bash"
  steps={[
    { notes: "Création et opérations sur les matrices" },
    { range: [1, 4], notes: "Sources des données" },
    { range: [6, 11], notes: "Création de la matrice" },
    { range: [13, 23], notes: "Nommage des colonnes/lignes" },
    { range: [25, 27], notes: "Accès aux éléments" },
    { range: [29, 31], notes: "Opérations sur les éléments" }
  ]}
/>

---

## Plot


---

export default Split

<SplitElement img="img/ide_r.png" title="R" backgroundColor="black" color="white"/>

<SplitElement img="img/ide_java.png" title="Java" backgroundColor="white" color="black"/>

---

## Les packages

CRAN - Comprehensive R Archive Network

* https://cran.r-project.org/

```notes
- il existe bcp de sites mirroirs
```

---

<CodeSurfer
  title="Librairies"
  code={require("!raw-loader!./snippets/packages.R")}
  lang="python"
  steps={[
	{ notes: "Installation depuis les repos du CRAN" },
    { range: [1, 2] },
    { range: [4, 5] },
    { range: [7, 8] },
    { lines: [10, 11] }
  ]}
/>

---

<CodeSurfer
  title="Librairies"
  code={require("!raw-loader!./snippets/devtools.R")}
  lang="python"
  steps={[
	{ notes: "Installation depuis des sources diverses" },
    { lines: [1] },
    { lines: [3] },
    { lines: [5] },
    { lines: [7, 8] },
    { lines: [10] }
  ]}
/>

---

<img src="img/graalvm.png" width="75%"/>

---

## GraalVM

Polyglot virtual machine
Can run programs written in
* Javascript
* Ruby
* Python 3
* R
* JVM-based languages (Java, Scala, Kotlin)
* LLVM-based languages (C / C++)

---

## GraalVM: an example

* Java micro-service using [SparkJava](http://sparkjava.com/)
* Génération d'un diagramme en R avec Ggplot2'

---

<CodeSurfer
  title="GraalVM (Java part)"
  code={require("!raw-loader!./snippets/plot_service.java")}
  lang="java"
  steps={[
  { notes: "Service construisant un SVG" },
    { range: [5, 6], notes: "Initialisation du contexte GraalVM" },
    { range: [8, 13], notes: "Chargement du code R" },
    { range: [15, 24], "notes": "Service web d'accès au SVG" },
    { range: [18, 19], notes: "Appel de la fonction R, qui retourne le SVG" }
  ]}
/>

```notes
Le moteur de R est FastR (d'Oracle ?)

```

---

<CodeSurfer
  title="GraalVM (R part)"
  code={require("!raw-loader!./snippets/plot_service.R")}
  lang="python"
  steps={[
    { notes: "Fonction R construisant un SVG" },
    { lines: [4], notes: "Utilisation d'un type (classe) venant de Java"},
    { lines: [9], notes: "Utilisation de la classe Logger venant de Java"},
    { lines: [6], notes: "Paramètre venant de Java (classe ParamsHolder)" },
    { lines: [9], notes: "Utilisation direct de l'attribut filename (String)" },
    { lines: [13, 14, 16], notes: "Utilisation de l'attribut trilogies (tableau d'entiers)" }
  ]}
/>

```notes
Le moteur de R est FastR (d'Oracle ?)

```

---


## Demo

<DemoStarwars/>

---

Vectors (one dimensional array): can hold numeric, character or logical values. The elements in a vector all have the same data type.
Matrices (two dimensional array): can hold numeric, character or logical values. The elements in a matrix all have the same data type.
Data frames (two-dimensional objects): can hold numeric, character or logical values. Within a column all elements have the same data type, but different columns can be of different data type.

---

## Conclusion

> “The best thing about R is that it was written by statisticians. The worst thing about R is that it was written by statisticians”

– Bow Cowgill
